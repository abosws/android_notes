# HTTPS知识点

![](./imgs/https.png)

## TLS 链接流程

### 1、Client发送：Client Hello

首先客户端会发送：

* 客户端支持的TLS版本
* 客户端支持的加密套件，如对称加密算法、非对称加密算法、哈希算法
* 客户端随机数

来让服务端进行选择。

### 2、Server发送： ServerHello

服务端收到客户端的client hello信息后，根据自身的条件，选择出TLS版本、加密套件，并产生服务端随机数一起发送给客户端。

这样的客户端和服务端就打成了如下的一致：

* 同样的TLS版本
* 同样的对称加密算法、非对称加密算法、哈希算法
* 同样的客户端的随机数
* 同样的服务端随机数


### 3、Server发送：服务器证书

数字证书主要包含证书发布机构，证书有效期，公钥，证书所有者，签名使用的算法，指纹以及指纹算法。数字证书可以保证里面的公钥一定是证书持有者的。

数字证书都有哪些内容：

* Issuer--证书的发布机构
发布证书的机构，指明证书是哪个公司创建的（并不是指使用证书的公司）。出了问题具体的颁发机构是要负责的

* Valid from，Valid to--证书的有效期
证书的使用期限。过了这个期限证书就会作废，不能使用。

* Public key--公钥
刚开始的时候介绍过公钥的概念，用于对消息加密的。

* Subject--主题
证书是颁发给谁了，一般是个人或公司名称或机构名称或公司网站的网址。

* Signature algorithm--签名所使用的算法
数字证书的数字签名所使用的加密算法，根据这个算法可以对指纹解密。指纹加密的结果就是数字签名。

* Thumbprint，Thumbprint algorithm--指纹以及指纹算法（一种HASH算法）
指纹和指纹算法会使用证书机构的私钥加密后和证书放在一起。主要用来保证证书的完整性，确保证书没有修改过。使用者在打开证书时根据指纹算法计算证书的hash值，和刚开始的值一样，则表示没有被修改过。


### 4、Client 连发3个消息
### 5、Server 连发2个消息


